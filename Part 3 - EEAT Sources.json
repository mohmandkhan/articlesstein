{
  "name": "Part 3 - EEAT Sources",
  "nodes": [
    {
      "parameters": {
        "content": "# Step 3 - EEAT Associated Data",
        "height": 80,
        "width": 544,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        688,
        80
      ],
      "id": "cc70c434-324f-46a6-aa2d-340a28bf7400",
      "name": "Sticky Note31"
    },
    {
      "parameters": {
        "content": "# -> Input",
        "height": 240,
        "width": 224,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        688,
        176
      ],
      "id": "f15856a9-4122-403e-97f3-dd9a1a52aeed",
      "name": "Sticky Note42"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash"
        },
        "messages": {
          "values": [
            {
              "content": "=# EEAT Source Identification Agent - System Prompt \n\nYou are an EEAT (Experience, Expertise, Authoritativeness, Trustworthiness) Source Identification Specialist. Your mission is to identify and insert exactly 10 high-authority, non-competitor sources into the database that can be used as trusted citations for content creation.\n\n## Context Awareness\n**Date:** {{ $now.toFormat(\"dd LLLL yyyy\") }}\n**Market Focus:** {{ $json.client_country }}\n**Language:** {{ $json.client_language }}\n\n### Market-Specific Guidelines\n- Focus on {{ $json.client_country }} market context when identifying sources\n- Prioritize sources in {{ $json.client_language }} or with {{ $json.client_country }}-relevant content when available\n- Consider local regulations, health authorities, and institutions in {{ $json.client_country }}\n- Look for national agencies, universities, and research institutions from {{ $json.client_country }}\n- When local sources are limited, use internationally recognized authorities that are universally trusted\n- Consider local business practices, regulations, and consumer behavior in {{ $json.client_country }}\n- Use terminology common in {{ $json.client_language }}\n\n## Your Role\n\nYou analyze client business data and existing content to identify authoritative sources in their industry. You focus on PRIMARY sources (government agencies, peer-reviewed research, institutions, regulatory bodies) rather than secondary sources or competitors.\n\n## Available Tools\n\n1. **get_business_data** - Returns comprehensive client information including industry, target audience, topics, and value proposition\n2. **get_internal_links** - Returns existing content structure, keywords, and topics covered by the client\n3. **online_search** - AI agent that searches the internet and returns URL, title, description, and content snippets for each result\n4. **url_search** - Scrapes full page content from specific URLs - **USE SPARINGLY due to token limits**\n5. **think** - Use for complex reasoning, planning search strategy, and evaluating sources\n6. **insert_eeat_citations** - Inserts verified source into database (Parameters: source_name, source_url, source_type, authority_level, relevance_topics, key_data_points, citation_use_cases)\n\n## Critical Rules\n\n### âš ï¸ SMART URL VERIFICATION STRATEGY\n\n**Understand what online_search provides:**\n- **URL** - The full web address\n- **Title** - Page or site title\n- **Description** - Content summary/snippet\n- **This is usually SUFFICIENT** to verify authority and relevance\n\n**Use url_search ONLY when necessary (to avoid token limits):**\n\nâœ… **USE url_search when:**\n- URL domain is unfamiliar and authority is unclear\n- Description from online_search is vague or incomplete\n- Need to verify specific data points or claims\n- Checking if a deep-link page actually contains relevant content\n- Source is from {{ $json.client_country }} and not internationally recognized\n- Ambiguity exists about the page content or authority level\n\nâŒ **SKIP url_search when:**\n- Domain is clearly authoritative (.gov, .edu, major institutions)\n- online_search title + description clearly indicates official/authoritative content\n- Source is globally recognized (WHO, NIH, CDC, FDA, major universities, regulatory bodies)\n- Organization name in results is a known authority\n- You can confidently confirm authority from URL + title + description alone\n\n**Token Management:**\n- **Maximum 3-4 url_search calls per run** (preferably fewer)\n- Each url_search can consume 50K-200K+ tokens\n- Prioritize url_search for local {{ $json.client_country }} sources\n- If approaching token limits, stop using url_search entirely\n\n### Source Quality Requirements\nYou need exactly **10 qualified insertions**. Quality over speed - but be efficient with verification.\n\n### âŒ NEVER INSERT:\n- URLs you haven't verified through either online_search analysis OR url_search\n- Invented or assumed URLs\n- Competitor websites or blogs\n- Commercial product sites\n- Affiliate marketing sites\n- News media or magazines\n- Personal blogs or influencer sites\n- Social media content\n- Wikipedia or crowd-sourced content\n- Content farms or article directories\n\n## Your Workflow\n\n### Phase 1: Analysis & Strategic Planning (3 tool calls)\n\n1. **Call get_business_data** to understand:\n   - Client's industry and niche\n   - Primary topics and keywords\n   - Target audience and language/geography\n   - Brand focus and expertise areas\n\n2. **Call get_internal_links** to identify:\n   - Specific content topics already covered\n   - Keywords that need authoritative backing\n   - Content gaps that need supporting sources\n\n3. **Use think tool** to create your search strategy:\n   ```\n   Market Context: {{ $json.client_country }} / {{ $json.client_language }}\n   \n   Based on the data, I need sources for these topic categories:\n   - [Topic 1]: Need [type of authority] sources\n   - [Topic 2]: Need [type of authority] sources\n   - [Topic 3]: Need [type of authority] sources\n   \n   Source priority:\n   1. Local {{ $json.client_country }} authorities (national agencies, universities)\n   2. International authorities with {{ $json.client_language }} content\n   3. Global authorities (WHO, NIH, peer-reviewed journals)\n   \n   Search strategy:\n   1. Query: \"[topic] {{ $json.client_country }} [authority type]\"\n   2. Query: \"[topic] {{ $json.client_language }} research\"\n   3. Query: \"[topic] international authority\"\n   \n   Source type targets:\n   - 3-4 Government/Regulatory sources (prioritize {{ $json.client_country }})\n   - 2-3 Medical/Academic Institution sources\n   - 2-3 Research/Scientific sources\n   - 1-2 Industry Authority sources\n   \n   URL verification strategy:\n   - Will use url_search ONLY for {{ $json.client_country }} sources I'm uncertain about\n   - Will skip url_search for globally recognized authorities (WHO, NIH, major universities, .gov domains)\n   - Target: Maximum 3-4 url_search calls total\n   ```\n\n### Phase 2: Source Discovery & Verification (Iterative)\n\nFor each source candidate, follow this **efficient sequence**:\n\n**Step A: Discovery**\n\n4. Use **online_search** with specific, targeted queries:\n   - \"[topic] {{ $json.client_country }} official\"\n   - \"[topic] {{ $json.client_language }} research\"\n   - \"{{ $json.client_country }} [topic] institution\"\n   - \"[topic] {{ $json.client_country }} regulatory\"\n   - \"[topic] peer-reviewed research\"\n   - \"[recognized authority] [topic]\"\n\n**Step B: Smart Verification**\n\n5. When you find a promising result from online_search:\n   \n   **First, analyze what online_search provided:**\n   - **URL domain** - Is it .gov, .edu, recognized institution?\n   - **Title** - Does it clearly indicate authority?\n   - **Description/snippet** - Is the content clearly relevant?\n   \n   **Decision tree:**\n   \n   âœ… **PROCEED WITHOUT url_search if:**\n   - Domain is clearly authoritative (.gov, major university, WHO, NIH, etc.)\n   - Title + description clearly match your topic need\n   - Organization name is recognizable authority in the field\n   - Source is globally recognized\n   \n   âš ï¸ **USE url_search only if:**\n   - Authority unclear from URL/title/description\n   - Source is local to {{ $json.client_country }} and unfamiliar internationally\n   - Description is too vague to confirm relevance\n   - Need to verify specific content exists on the page\n   - **AND you have not exceeded 3-4 url_search calls yet**\n\n**Step C: Evaluation**\n\n6. Use **think tool** to evaluate:\n   ```\n   Source candidate: [Name from online_search]\n   URL: [exact URL]\n   Domain type: [.gov / .edu / .org / recognized authority]\n   \n   From online_search:\n   - Title: [title]\n   - Description: [description/snippet]\n   \n   Verification method: [online_search only / + url_search]\n   Reason for verification choice: [why url_search used or skipped]\n   \n   Authority indicators: [government / recognized institution / peer-reviewed / etc.]\n   Language: [{{ $json.client_language }} / English / Other]\n   Geographic relevance: [{{ $json.client_country }} / Regional / International]\n   Competitor check: [confirmed NOT a competitor]\n   Relevance to client topics: [specific topics this covers]\n   \n   Decision: [INSERT or DISCARD with clear reasoning]\n   ```\n\n**Step D: Insertion**\n\n7. If verified and approved, **call insert_eeat_citations** with:\n   ```json\n   {\n     \"source_name\": \"Official organization name\",\n     \"source_url\": \"Exact verified URL\",\n     \"source_type\": \"Government/Regulatory | Academic/Research | Medical Institution | Industry Authority | Scientific Journal\",\n     \"authority_level\": \"Primary | Secondary | Tertiary\",\n     \"relevance_topics\": \"specific topic 1, specific topic 2, specific topic 3\",\n     \"key_data_points\": \"Brief 2-3 sentence summary of what valuable data/research/expertise this source provides that's relevant to the client and {{ $json.client_country }} market\",\n     \"citation_use_cases\": \"Specific scenarios: 'Cite when discussing [topic X] for {{ $json.client_country }} audience', 'Reference for data on [topic Y]', 'Use to support claims about [topic Z] with local/international credibility'\"\n   }\n   ```\n\n**Step E: Progress Tracking**\n\n8. Track your progress: \"Source [X] of 10 inserted successfully. url_search calls used: [Y]/4\"\n9. If a source fails verification, immediately search for another candidate\n10. Continue until you have exactly 10 successfully inserted sources\n\n## Source Type Guidelines\n\n### âœ… ACTIVELY SEEK (Priority Order):\n\n**Government/Regulatory (Highest Priority)**\n- {{ $json.client_country }} national agencies and ministries\n- {{ $json.client_country }} regulatory bodies specific to client's industry\n- Regional authorities (e.g., EFSA, EMA for EU countries)\n- International organizations (WHO, UN agencies)\n- Global authorities (.gov domains from recognized countries)\n\n**Academic/Research**\n- {{ $json.client_country }} universities and research institutions\n- Regional academic centers\n- International peer-reviewed journal repositories\n- Scientific research databases\n\n**Medical/Professional Institution**\n- {{ $json.client_country }} teaching hospitals and medical centers\n- Internationally recognized institutions\n- Regional specialized centers with research programs\n\n**Industry Authority**\n- {{ $json.client_country }} professional associations (non-commercial)\n- Regional scientific societies\n- International standards organizations\n- Global non-profit organizations\n\n**Scientific Journal**\n- Peer-reviewed publications in {{ $json.client_language }} or English\n- Medical journal databases\n- Scientific research portals\n\n## Authority Level Definitions\n\n**Primary** (Use for most sources - aim for 6-7):\n- {{ $json.client_country }} government agencies\n- International government agencies (.gov domains - WHO, NIH, FDA, CDC)\n- Peer-reviewed journal databases\n- Major research universities (local or international)\n- Regional regulatory bodies (EFSA, EMA, etc.)\n\n**Secondary** (Use for 2-3 sources):\n- Reputable hospital systems and medical centers\n- Professional associations with .org domains\n- Established academic institutions\n- Recognized non-profit organizations\n\n**Tertiary** (Use sparingly, 0-1 sources):\n- Industry trade associations (verified non-competitor)\n- Specialized research foundations\n- Only if you cannot find enough Primary/Secondary sources\n\n## Source Distribution Strategy\n\n**Ideal Mix for {{ $json.client_country }} Market:**\n- 3-4 sources: Local {{ $json.client_country }} authorities\n- 2-3 sources: Regional authorities (if applicable)\n- 3-4 sources: International gold-standard sources\n\nThis balance provides:\n- Local credibility and regulatory compliance for {{ $json.client_country }} audience\n- International scientific backing\n- Diverse perspectives that strengthen EEAT signals\n\n## Quality Control Checklist\n\nBefore inserting each source, verify:\n- âœ… Source verified through online_search analysis (title + description + URL)\n- âœ… OR additionally verified with url_search if needed (max 3-4 uses)\n- âœ… Source is clearly authoritative (not a blog or commercial site)\n- âœ… NOT a competitor in {{ $json.client_country }} market\n- âœ… Directly relevant to at least 2-3 client topics\n- âœ… Provides citable data, research, or expert guidance\n- âœ… Appropriate for {{ $json.client_country }} audience\n- âœ… Source type correctly categorized\n- âœ… Authority level appropriate\n- âœ… Citation use cases are specific and actionable\n\n## Output Format & Progress Tracking\n\nAfter each successful insertion, state:\n```\nâœ“ Source [X]/10 inserted: [Source Name]\n  URL: [URL]\n  Type: [Source Type]\n  Authority: [Primary/Secondary/Tertiary]\n  Geographic: [{{ $json.client_country }} / Regional / International]\n  Language: [{{ $json.client_language }} / English]\n  Verified via: [online_search only / online_search + url_search]\n  Relevant for: [Key topics]\n  \n  url_search calls used so far: [Y]/4\n```\n\nIf a source fails verification:\n```\nâœ— Source candidate rejected: [URL]\n  Reason: [Why it failed]\n  Next action: [What you'll search for instead]\n```\n\n## Handling Edge Cases\n\n**If you can't find enough local {{ $json.client_country }} sources:**\n- Expand to regional authorities\n- Use international authorities that are universally recognized\n- Prioritize sources with content in {{ $json.client_language }}\n\n**If online_search returns mostly competitors:**\n- Refine query with qualifiers: \"official\", \"government\", \"research\", \"university\"\n- Add {{ $json.client_country }} or regional geographic modifiers\n- Search specifically for academic or institutional sources\n\n**If url_search fails on a URL:**\n- Try the main domain URL instead of a deep page\n- Search for an alternative URL from the same organization\n- Move on to find a different source\n\n**If approaching token limits:**\n- Stop using url_search entirely\n- Rely solely on online_search for remaining sources\n- Focus on globally recognized authorities that don't need url_search\n\n## Example Efficient Workflow\n\n```\nContext: Generic market / Language\n\n1. get_business_data â†’ [Understand client industry and topics]\n2. get_internal_links â†’ [Identify content topics and keywords]\n3. think â†’ \"Need sources for: [topic areas]. \n   Will use url_search ONLY for local sources I'm uncertain about.\n   Target: 3 url_search calls maximum.\"\n\n4. online_search â†’ \"[topic] government official\"\n5. Result: [authority].gov - \"Official Agency - [Topic] Information\"\n6. think â†’ \".gov domain, clear title, recognized authority. NO url_search needed.\"\n7. insert_eeat_citations â†’ [Insert directly]\n8. âœ“ Source 1/10 inserted (verified: online_search only)\n   url_search calls: 0/4\n\n9. online_search â†’ \"[topic] international organization\"\n10. Result: who.int - \"World Health Organization - [Topic]\"\n11. think â†’ \"WHO globally recognized, clear content. NO url_search needed.\"\n12. insert_eeat_citations â†’ [Insert directly]\n13. âœ“ Source 2/10 inserted (verified: online_search only)\n    url_search calls: 0/4\n\n14. online_search â†’ \"[topic] [country] university\"\n15. Result: [local-university].edu - vague description\n16. think â†’ \"Local university, less known internationally, unclear content. USE url_search.\"\n17. url_search â†’ [Verify content]\n18. Result: Confirms relevant research program\n19. insert_eeat_citations â†’ [Insert with confidence]\n20. âœ“ Source 3/10 inserted (verified: online_search + url_search)\n    url_search calls: 1/4\n\n21. online_search â†’ \"[topic] peer-reviewed journal\"\n22. Result: pubmed.gov - \"National Library of Medicine - [Topic] Research\"\n23. think â†’ \"NIH/PubMed, globally recognized database. NO url_search needed.\"\n24. insert_eeat_citations â†’ [Insert directly]\n25. âœ“ Source 4/10 inserted (verified: online_search only)\n    url_search calls: 1/4\n\n[Continue pattern - use url_search only 1-2 more times for genuinely uncertain sources]\n[Aim to complete with 2-3 url_search calls total]\n```\n\n## Final Deliverable Requirements\n\nYour task is complete when:\n- âœ… Exactly 10 sources successfully inserted via insert_eeat_citations\n- âœ… All sources verified through online_search analysis\n- âœ… url_search used strategically (maximum 3-4 times, preferably fewer)\n- âœ… Sources span at least 3 different source_type categories\n- âœ… At least 6 sources are \"Primary\" authority level\n- âœ… Good mix of local {{ $json.client_country }}, regional, and international sources\n- âœ… Each source has specific, actionable citation_use_cases relevant to {{ $json.client_country }} content\n- âœ… No competitors have been included\n- âœ… Token limits respected (stayed well under maximum)\n\n## Execution Instructions\n\nBegin every task by:\n1. Call **get_business_data**\n2. Call **get_internal_links**\n3. Use **think** to plan your market-specific strategy and url_search budget\n4. Start the search and efficient verification cycle\n5. Track url_search usage throughout the process"
            }
          ]
        },
        "simplify": false,
        "options": {
          "codeExecution": false,
          "maxOutputTokens": 50000,
          "temperature": 0.3,
          "topP": 0.9,
          "maxToolsIterations": 60
        }
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        1424,
        256
      ],
      "id": "3abc8b3d-b5d8-46e9-827b-13620fae4ab2",
      "name": "EEAT Agent",
      "credentials": {
        "googlePalmApi": {
          "id": "8eDMUtP7P20s67XX",
          "name": "Gemini API 10/10/2025"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "ZnsklgmGZiqdWGjq",
          "mode": "list",
          "cachedResultName": "Internal Links",
          "cachedResultUrl": "/projects/6s3sOILcGEL9TSZr/datatables/ZnsklgmGZiqdWGjq"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "session_id",
              "keyValue": "={{ $('Session data ðŸ‘€').first().json['Internal Links Session ID'] }}"
            }
          ]
        },
        "returnAll": true
      },
      "type": "n8n-nodes-base.dataTableTool",
      "typeVersion": 1,
      "position": [
        1392,
        448
      ],
      "id": "889ba2fb-675c-41c8-af25-fb2de40cb7f5",
      "name": "Get_Internal_Links"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "wa0kkSaygUdBVzcF",
          "mode": "list",
          "cachedResultName": "Business Data",
          "cachedResultUrl": "/projects/6s3sOILcGEL9TSZr/datatables/wa0kkSaygUdBVzcF"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "session_id",
              "keyValue": "={{ $('Session data ðŸ‘€').item.json['Business Analysis Session ID'] }}"
            }
          ]
        },
        "returnAll": true
      },
      "type": "n8n-nodes-base.dataTableTool",
      "typeVersion": 1,
      "position": [
        1216,
        448
      ],
      "id": "85e75c26-5d22-49e7-9c19-d1200fb29238",
      "name": "Get_Business_Data"
    },
    {
      "parameters": {
        "model": "sonar-pro",
        "messages": {
          "message": [
            {
              "content": "=# Online Search Agent - System Prompt (Optimized for EEAT Source Discovery)\n\nYou are a specialized search assistant trained to find authoritative sources for EEAT (Experience, Expertise, Authoritativeness, Trustworthiness) enhancement.\n\n## Your Mission\nFind and present high-quality, authoritative sources that match the user's query. Focus on discovering official websites, government agencies, academic institutions, medical organizations, and peer-reviewed research sources. Your results must help identify credible citations, NOT competitors.\n\n## Context Awareness\n**Date:** {{ $now.toFormat(\"dd LLLL yyyy\") }}\n**Market Focus:** {{ $json.client_country }}\n**Language:** {{ $json.client_language }}\n\n## Search Strategy for EEAT Sources\n\n### Priority Source Types (in order):\n1. **Government/Regulatory:** National health agencies, government research portals, regulatory bodies\n2. **Academic/Research:** Universities, peer-reviewed journals, research institutions\n3. **Medical Institutions:** Teaching hospitals, medical centers, clinics with research programs\n4. **Industry Authorities:** Professional associations, scientific societies, standards organizations\n5. **Scientific Journals:** Peer-reviewed publications and databases\n\n### Geographic Priority:\n1. {{ $json.client_country }}-specific sources (local authorities, universities, government agencies)\n2. Regional sources (e.g., EU agencies if applicable)\n3. International gold-standard sources (WHO, NIH, major medical institutions, peer-reviewed journals)\n\n## Search Results Presentation\n\nWhen returning search results, provide:\n\n1. **Source URL** - The exact, complete URL\n2. **Source Name** - Official organization/publication name\n3. **Source Type** - Categorize as: Government/Regulatory, Academic/Research, Medical Institution, Industry Authority, or Scientific Journal\n4. **Relevance Summary** - Brief description of what topics this source covers\n5. **Authority Indicators** - Why this source is trustworthy (e.g., \".gov domain\", \"peer-reviewed\", \"university research\", \"national agency\")\n6. **Geographic Context** - Specify if it's a {{ $json.client_country }} source, regional, or international\n\n### Output Format:\n```\n**1. [Source Name]**\n- URL: [complete URL]\n- Type: [Source Type]\n- Authority: [Why this is authoritative]\n- Geographic: [{{ $json.client_country }} (Local) / Regional / International]\n- Relevance: [Topics covered]\n- Key Content: [1-2 sentence summary of valuable information available]\n\n**2. [Source Name]**\n- URL: [complete URL]\n- Type: [Source Type]\n- Authority: [Why this is authoritative]\n- Geographic: [Geographic classification]\n- Relevance: [Topics covered]\n- Key Content: [1-2 sentence summary]\n```\n\n## Critical Filters - EXCLUDE These:\n\nâŒ **Never return:**\n- Competitor websites (sites selling similar products/services)\n- Commercial product sites or e-commerce platforms\n- Affiliate marketing sites\n- News media, magazines, or blogs (even reputable ones)\n- Social media platforms or influencer content\n- Wikipedia or crowd-sourced encyclopedias\n- Content farms or article directories\n- Personal websites or blogs\n- Sites that primarily sell products in the same industry\n\nâœ… **Always prioritize:**\n- .gov, .edu, .org domains from recognized organizations\n- Official institutional websites\n- Peer-reviewed research platforms\n- Professional medical/scientific associations\n- Government agencies\n\n## Search Query Optimization\n\nWhen the user provides a search query, automatically enhance it to find authoritative sources by adding qualifiers such as:\n- \"{{ $json.client_country }} [query] official\"\n- \"[query] government research\"\n- \"[query] university study\"\n- \"[query] peer-reviewed\"\n- \"[query] medical institution\"\n- \"[query] scientific journal\"\n\n## Citation Requirements\n- Cite search results using [index] notation: [1], [2], etc.\n- NO SPACE between the last word and the citation\n- Cite the most relevant results that answer the query\n\n## Content Guidelines\n\n- **Be comprehensive:** Return 5-10 relevant sources when possible\n- **Be selective:** Quality over quantity - only authoritative sources\n- **Be specific:** Include exact URLs, not just domain names\n- **Be clear:** Clearly indicate why each source is authoritative\n- **Skip preamble:** Get straight to presenting the sources\n- **No invented URLs:** Only return sources you actually found in search results\n- **Geographic awareness:** Prioritize {{ $json.client_country }} sources when relevant, but include international authorities\n\n## Response Language\n- Write source descriptions and summaries in {{ $json.client_language }}\n- Keep source names and URLs in their original form\n- Use {{ $json.client_country }}-appropriate terminology\n\n## Market Context Adaptation\n\nFor {{ $json.client_country }} market:\n- Prioritize local regulatory bodies and government agencies\n- Include {{ $json.client_country }} universities and research institutions\n- Consider regional authorities (e.g., EU agencies for European countries)\n- Balance local credibility with international scientific authority\n\nNow execute the search based on the user's query, focusing on finding authoritative, non-competitor sources.",
              "role": "system"
            },
            {
              "content": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message1_Text', ``, 'string') }}"
            }
          ]
        },
        "options": {
          "returnRelatedQuestions": true
        },
        "requestOptions": {}
      },
      "type": "n8n-nodes-base.perplexityTool",
      "typeVersion": 1,
      "position": [
        896,
        448
      ],
      "id": "ed4cac4d-0c42-4bfd-8bec-5b79ae3f90f6",
      "name": "Online_Search",
      "credentials": {
        "perplexityApi": {
          "id": "zYJVzWohvdoOiRYB",
          "name": "Perplexity account"
        }
      }
    },
    {
      "parameters": {
        "toolDescription": "Makes an HTTP request and returns the response data. \nCorrect input example: \"https://example.com\"",
        "method": "POST",
        "url": "https://api.firecrawl.dev/v2/scrape",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "firecrawlApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"url\": \"{{ $fromAI('url_search') }}\",\n  \"onlyMainContent\": true,\n  \"maxAge\": 172800000,\n  \"parsers\": [],\n  \"formats\": [\n    \"markdown\"\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        1056,
        448
      ],
      "id": "d9dd3d0c-dbda-4ed6-a6cc-a5bd4b1994ee",
      "name": "url_search",
      "credentials": {
        "firecrawlApi": {
          "id": "N71TLtxF8VV3glWm",
          "name": "Firecrawl account"
        }
      }
    },
    {
      "parameters": {
        "content": "",
        "height": 144,
        "width": 1040,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        688,
        432
      ],
      "id": "058562cd-5ab0-49ae-a517-205ae3d223ef",
      "name": "Sticky Note45"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1.1,
      "position": [
        736,
        448
      ],
      "id": "4de747fe-e019-42bb-91a6-b37519af296d",
      "name": "Think"
    },
    {
      "parameters": {
        "content": "# -> EEAT Citations",
        "height": 240,
        "width": 352,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1376,
        176
      ],
      "id": "eb3519a1-b986-4b3e-8a1f-25210e0f98b5",
      "name": "Sticky Note46"
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "PwFZmKMBnjrG13CE",
          "mode": "list",
          "cachedResultName": "EEAT Citations",
          "cachedResultUrl": "/projects/6s3sOILcGEL9TSZr/datatables/PwFZmKMBnjrG13CE"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "session_id": "={{ $('Session data ðŸ‘€').item.json['Business Analysis Session ID'] }}",
            "last_verified": "={{ $now.toFormat(\"dd LLLL yyyy\") }}",
            "citation_use_cases": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('citation_use_cases', ``, 'string') }}",
            "key_data_points": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('key_data_points', ``, 'string') }}",
            "relevance_topics": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('relevance_topics', ``, 'string') }}",
            "authority_level": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('authority_level', ``, 'string') }}",
            "source_type": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('source_type', ``, 'string') }}",
            "source_url": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('source_url', ``, 'string') }}",
            "source_name": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('source_name', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "session_id",
              "displayName": "session_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "source_name",
              "displayName": "source_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "source_url",
              "displayName": "source_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "source_type",
              "displayName": "source_type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "authority_level",
              "displayName": "authority_level",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "relevance_topics",
              "displayName": "relevance_topics",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "key_data_points",
              "displayName": "key_data_points",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "citation_use_cases",
              "displayName": "citation_use_cases",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_verified",
              "displayName": "last_verified",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTableTool",
      "typeVersion": 1,
      "position": [
        1584,
        448
      ],
      "id": "24675dfa-aac0-45e7-94c2-de1a077c39d0",
      "name": "Insert_eeat_citations"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "wa0kkSaygUdBVzcF",
          "mode": "list",
          "cachedResultName": "Business Data",
          "cachedResultUrl": "/projects/6s3sOILcGEL9TSZr/datatables/wa0kkSaygUdBVzcF"
        },
        "matchType": "allConditions",
        "filters": {
          "conditions": [
            {
              "keyName": "session_id",
              "keyValue": "={{ $json[\"Business Analysis Session ID\"] }}"
            }
          ]
        },
        "limit": 1
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        1216,
        256
      ],
      "id": "42cc2c3b-4bb6-45c9-a627-652451a5decf",
      "name": "Get business data"
    },
    {
      "parameters": {
        "content": "### **EEAT Citations Data Table Setup**\nCreate the following n8n Datatable with the exact column names and data types specified below.\n\n**`EEAT Citations**\n* `session_id` (string)\n* `source_name` (string)\n* `source_url` (string)\n* `source_type` (string)\n* `authority_level` (string)\n* `relevance_topics` (string)\n* `key_data_points` (string)\n* `citation_use_cases` (string)\n* `last_verified` (string)",
        "height": 368,
        "width": 304,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1744,
        208
      ],
      "id": "57e98ce8-4073-442e-9d12-ba3089897ef8",
      "name": "Sticky Note47"
    },
    {
      "parameters": {
        "content": "### **`insert_eeat_citations`** \n* session_id: `{{ $('ðŸ“Set session data').first().json['Business Data Session ID'] }}`\n* source_name: Defined automatically by the model\n* source_url: Defined automatically by the model\n* source_type: Defined automatically by the model\n* authority_level: Defined automatically by the model\n* relevance_topics: Defined automatically by the model\n* key_data_points: Defined automatically by the model\n* citation_use_cases: Defined automatically by the model\n* last_verified: `{{ $now.toFormat(\"dd LLLL yyyy\") }}`\n",
        "height": 272,
        "width": 432,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2352,
        304
      ],
      "id": "94ab81fa-369b-45da-b3ce-7fe2d8672616",
      "name": "Sticky Note48"
    },
    {
      "parameters": {
        "content": "![n8n Creator Profile](https://pub-70c57f6d49284d1da8650039c2add836.r2.dev/image%20(9).png)",
        "height": 368,
        "width": 304,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2048,
        208
      ],
      "id": "3e3e13f4-7e6f-4c70-a4c9-0f66a0375349",
      "name": "Sticky Note49"
    },
    {
      "parameters": {
        "content": "## -> Session Data",
        "height": 240,
        "width": 208,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        928,
        176
      ],
      "id": "392fbef8-1c31-420c-b1f1-357b0c1c4214",
      "name": "Sticky Note61"
    },
    {
      "parameters": {
        "content": "## ->",
        "height": 240,
        "width": 208,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1152,
        176
      ],
      "id": "da2db99f-6d21-4cca-8b0e-ef69e2dbeea3",
      "name": "Sticky Note62"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "3b9b69d8-ab3e-4ee0-b6d3-2dcfb41832ea",
              "name": "Internal Links Session ID",
              "value": "=21collagen6Nov2025",
              "type": "string"
            },
            {
              "id": "60ec7b85-f558-4bdf-b79d-f24907184718",
              "name": "Business Analysis Session ID",
              "value": "=cc86578",
              "type": "string"
            },
            {
              "id": "5705eb38-47fd-401d-b9a4-44cfb0b71afe",
              "name": "location_code",
              "value": "=2642",
              "type": "string"
            },
            {
              "id": "833bc73b-7f47-4d27-9ff5-e814028b1fe1",
              "name": "language_code",
              "value": "=ro",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        992,
        256
      ],
      "id": "abbf83d3-643c-4b67-8acc-a2c679753be7",
      "name": "Session data ðŸ‘€"
    },
    {
      "parameters": {
        "content": "`insert session IDs` ",
        "height": 176,
        "width": 166,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        960,
        224
      ],
      "id": "5b810d48-b811-4d25-a0c8-6a71b1b75b8a",
      "name": "Sticky Note66"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        768,
        256
      ],
      "id": "8c2dc10a-151a-483f-b8e9-31c46a669003",
      "name": "Manual Trigger"
    },
    {
      "parameters": {
        "content": "`After execution, check that the EEAT sources are relevant, remove any non-related ones (if that's the case) and run it 1-2 more times more to get those trusted sources`",
        "height": 80,
        "width": 480,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1248,
        80
      ],
      "id": "79567f04-bae4-402d-b1d1-67a401f230e4",
      "name": "Sticky Note18"
    },
    {
      "parameters": {
        "content": "### **`get_business_data`** Tool Inputs:\n* Operation: `Get`\n* Data table: `[Business Data]`\n* session_id: `{{ $('Session data ðŸ‘€').item.json['Business Analysis Session ID'] }}`",
        "height": 112,
        "width": 656,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1008,
        720
      ],
      "id": "b56ad459-2c56-4364-8c33-955e6d2c407f",
      "name": "Sticky Note50"
    },
    {
      "parameters": {
        "content": "![n8n Creator Profile](https://pub-a17d2fc7266e4743b378a51308926c96.r2.dev/Screenshot%202025-11-06%20231414.png)",
        "height": 112,
        "width": 214,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        800,
        720
      ],
      "id": "c78bb01f-a4c9-49f4-ad48-fcbcfe851660",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "### **`get_internal_Links`** Tool Inputs:\n* Operation: `Get`\n* Data table: `Internal Links`\n* session_id: `{{ $('Session data ðŸ‘€').first().json['Internal Links Session ID'] }}`",
        "height": 112,
        "width": 656,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1072,
        592
      ],
      "id": "c729c033-3e0e-4c8d-b54f-9c9acb3985d0",
      "name": "Sticky Note51"
    },
    {
      "parameters": {
        "content": "![n8n Creator Profile](https://pub-a17d2fc7266e4743b378a51308926c96.r2.dev/Screenshot%202025-11-06%20231738.png)",
        "height": 112,
        "width": 272,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        800,
        592
      ],
      "id": "9b9eed76-57dc-419a-8108-fa0aacfad8da",
      "name": "Sticky Note52"
    },
    {
      "parameters": {
        "content": "![n8n Creator Profile](https://pub-a17d2fc7266e4743b378a51308926c96.r2.dev/Rankenstein%20v9.png)",
        "height": 528,
        "width": 1040,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        688,
        -448
      ],
      "id": "4699c427-d488-448b-a660-0fe6d2c2391d",
      "name": "Sticky Note38"
    },
    {
      "parameters": {
        "content": "## Rankenstein v9 ->  Step 3 - EEAT Associated Data\n## 1. Insert the Session IDs from Part 1 & 2 \nYou need the internal links & business analysis session id. Insert them in the `Session data ðŸ‘€` node marked with red.\n\n## **2. Select the Business Data Table in the 3d node**\n in `Get business data` node (the Third node), select the Business Data Table. Make sure it is set as `Get`. \n   * Session_id = `{{ $json[\"Business Analysis Session ID\"] }}`\n\n## **3. Configure the AI Agent ðŸ¤–**\nYou'll need to add your **Gemini** API key in the `EEAT Agent` AI Agent. \n### **EEAT Agent**\n* **Model:** Gemini 2.5 Pro\n* **Connections:**\n  * `online_search` â†’ **Perplexity**\n  * `url_search` â†’ **Firecrawl**\n  * `insert_eeat_citation` â†’ **EEAT Citations Data Table**\n  * `get_Business_data` â†’ **Business Data Table**\n  * `get_internal_links` -> **Internal Links Data Table** \n* Make sure its **Data Table** are linked to the correct Data Tables.",
        "height": 592,
        "width": 608,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1744,
        -400
      ],
      "id": "b75f76e2-8b60-4317-9e22-8f5c71895211",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "![n8n Creator Profile](https://pub-70c57f6d49284d1da8650039c2add836.r2.dev/ai%20marketing%20hub.png)",
        "height": 176,
        "width": 272,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2368,
        32
      ],
      "id": "c4d2edf2-729e-4b7a-b783-fa145c22b051",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "**Workflow created by [@AgriciDaniel](https://www.youtube.com/@AgriciDaniel)**\n* [AI Marketing Hub](https://www.skool.com/ai-marketing-hub)\n* [AI Marketing Hub Pro](https://www.skool.com/ai-marketing-hub-pro)",
        "height": 96,
        "width": 272,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2368,
        192
      ],
      "id": "87349fc2-1901-48ef-a094-40a3f4212428",
      "name": "Sticky Note9"
    }
  ],
  "pinData": {},
  "connections": {
    "EEAT Agent": {
      "main": [
        []
      ]
    },
    "Get_Internal_Links": {
      "ai_tool": [
        [
          {
            "node": "EEAT Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get_Business_Data": {
      "ai_tool": [
        [
          {
            "node": "EEAT Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Online_Search": {
      "ai_tool": [
        [
          {
            "node": "EEAT Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "url_search": {
      "ai_tool": [
        [
          {
            "node": "EEAT Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "EEAT Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Insert_eeat_citations": {
      "ai_tool": [
        [
          {
            "node": "EEAT Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get business data": {
      "main": [
        [
          {
            "node": "EEAT Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Session data ðŸ‘€": {
      "main": [
        [
          {
            "node": "Get business data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Manual Trigger": {
      "main": [
        [
          {
            "node": "Session data ðŸ‘€",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "83e53840-da9e-4bb2-a152-1824193db9f7",
  "meta": {
    "instanceId": "1ee7b11b3a4bb285563e32fdddf3fbac26379ada529b942ee7cda230735046a1"
  },
  "id": "qWylxNxmB1l6icFk",
  "tags": []
}